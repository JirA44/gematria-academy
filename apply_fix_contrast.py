#!/usr/bin/env python3
"""
Script pour ajouter le fichier fix-contrast.css √† toutes les pages HTML
"""

import os
import glob

# Dossier contenant les fichiers HTML
html_dir = os.path.dirname(os.path.abspath(__file__))

# Ligne √† ajouter
fix_line = '    <link rel="stylesheet" href="fix-contrast.css">\n'

# Trouver tous les fichiers HTML
html_files = glob.glob(os.path.join(html_dir, "*.html"))

print(f"Trouv√© {len(html_files)} fichiers HTML √† traiter...\n")

for html_file in html_files:
    filename = os.path.basename(html_file)

    # Lire le contenu
    with open(html_file, 'r', encoding='utf-8') as f:
        content = f.read()

    # V√©rifier si le fix n'est pas d√©j√† ajout√©
    if 'fix-contrast.css' in content:
        print(f"‚è≠Ô∏è  {filename} - D√©j√† corrig√©, ignor√©")
        continue

    # Trouver la position apr√®s la derni√®re balise <link rel="stylesheet">
    if '<link rel="stylesheet" href="style.css">' in content:
        # Ajouter juste apr√®s style.css
        content = content.replace(
            '<link rel="stylesheet" href="style.css">',
            '<link rel="stylesheet" href="style.css">\n    <link rel="stylesheet" href="fix-contrast.css">'
        )
    elif '</head>' in content:
        # Sinon, ajouter juste avant </head>
        content = content.replace('</head>', fix_line + '</head>')
    else:
        print(f"‚ùå {filename} - Structure HTML non reconnue")
        continue

    # √âcrire le nouveau contenu
    with open(html_file, 'w', encoding='utf-8') as f:
        f.write(content)

    print(f"‚úÖ {filename} - Correction appliqu√©e")

print("\nüéâ Termin√© ! Le contraste a √©t√© am√©lior√© sur toutes les pages.")
