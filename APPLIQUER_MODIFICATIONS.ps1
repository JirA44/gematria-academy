# Script PowerShell pour appliquer automatiquement toutes les modifications
# Ex√©cuter ce script pour ajouter les animations et la section Mandala

$fichier = "D:\Apprentissage_Runes_Gematria\index_multilingual.html"

Write-Host "=== APPLICATION DES MODIFICATIONS ===" -ForegroundColor Cyan
Write-Host ""

# Lire le contenu du fichier
$contenu = Get-Content -Path $fichier -Raw -Encoding UTF8

# V√©rifier si les modifications sont d√©j√† appliqu√©es
$animationsDejaPresentees = $contenu -match "animated-backgrounds.css"
$mandalaDejaPresentee = $contenu -match 'id="mandala"'

if ($animationsDejaPresentees -and $mandalaDejaPresentee) {
    Write-Host "‚úÖ Toutes les modifications sont d√©j√† appliqu√©es !" -ForegroundColor Green
    Write-Host ""
    Read-Host "Appuyez sur Entr√©e pour fermer"
    exit
}

# Faire une sauvegarde
$backup = $fichier + ".backup_" + (Get-Date -Format "yyyyMMdd_HHmmss")
Copy-Item -Path $fichier -Destination $backup
Write-Host "‚úÖ Sauvegarde cr√©√©e : $backup" -ForegroundColor Green

# MODIFICATION 1 : Ajouter le lien CSS pour les animations
if (-not $animationsDejaPresentees) {
    Write-Host "‚è≥ Ajout du fichier CSS d'animations..." -ForegroundColor Yellow
    $contenu = $contenu -replace '(<link rel="stylesheet" href="fix-contrast.css">)', '$1`n    <link rel="stylesheet" href="animated-backgrounds.css">'
    Write-Host "‚úÖ Animations CSS ajout√©es" -ForegroundColor Green
} else {
    Write-Host "‚ö†Ô∏è  Les animations CSS sont d√©j√† pr√©sentes" -ForegroundColor Yellow
}

# MODIFICATION 2 : Ajouter la section Mandala
if (-not $mandalaDejaPresentee) {
    Write-Host "‚è≥ Ajout de la section Mandala..." -ForegroundColor Yellow

    $sectionMandala = @'

        <section id="mandala" class="section-category">
            <h2 data-i18n="mandala_title">üïâÔ∏è Mandalas Sacr√©s</h2>
            <p class="intro" data-i18n="mandala_intro">Les mandalas sont des repr√©sentations g√©om√©triques de l''univers, utilis√©s depuis des mill√©naires dans les traditions bouddhistes et hindoues. La contemplation profonde d''un mandala, sans mots ni pens√©es, permet d''acc√©der au silence int√©rieur et √† la paix de l''esprit.</p>

            <div class="level-cards">
                <div class="card beginner">
                    <div class="card-header">
                        <h3 data-i18n="mandala_contemplation">üßò Contemplation Profonde</h3>
                        <span class="badge" data-i18n="badge_meditation">M√©ditation</span>
                    </div>
                    <ul data-section="mandala-practice">
                        <li data-i18n="mandala_1">Galerie plein √©cran immersive</li>
                        <li data-i18n="mandala_2">Sans mots, sans pens√©es</li>
                        <li data-i18n="mandala_3">Silence int√©rieur et concentration</li>
                        <li data-i18n="mandala_4">Navigation intuitive (fl√®ches ‚Äπ ‚Ä∫)</li>
                        <li data-i18n="mandala_5">Uploadez vos mandalas personnels</li>
                    </ul>
                    <a href="mandala.html" class="btn btn-beginner" data-i18n="btn_contemplate">Contempler ‚Üí</a>
                </div>

                <div class="card intermediate">
                    <div class="card-header">
                        <h3 data-i18n="mandala_creation">üé® Cr√©ation de Mandalas</h3>
                        <span class="badge" data-i18n="badge_deepening">Approfondissement</span>
                    </div>
                    <ul data-section="mandala-creation">
                        <li data-i18n="mandala_create_1">Comprendre la g√©om√©trie sacr√©e</li>
                        <li data-i18n="mandala_create_2">Symbolisme des formes et couleurs</li>
                        <li data-i18n="mandala_create_3">Mandalas tib√©tains traditionnels</li>
                        <li data-i18n="mandala_create_4">Techniques de dessin circulaire</li>
                        <li data-i18n="mandala_create_5">M√©ditation cr√©ative guid√©e</li>
                    </ul>
                    <a href="mandala.html" class="btn btn-intermediate" data-i18n="btn_create">Cr√©er ‚Üí</a>
                </div>

                <div class="card expert">
                    <div class="card-header">
                        <h3 data-i18n="mandala_mastery">üå∫ Ma√Ætrise des Mandalas</h3>
                        <span class="badge" data-i18n="badge_mastery">Ma√Ætrise</span>
                    </div>
                    <ul data-section="mandala-expert">
                        <li data-i18n="mandala_master_1">Mandalas tantriques avanc√©s</li>
                        <li data-i18n="mandala_master_2">Yantras et diagrammes cosmiques</li>
                        <li data-i18n="mandala_master_3">M√©ditation profonde prolong√©e</li>
                        <li data-i18n="mandala_master_4">Rituel de cr√©ation et destruction</li>
                        <li data-i18n="mandala_master_5">Transmission spirituelle par le mandala</li>
                    </ul>
                    <a href="mandala.html" class="btn btn-expert" data-i18n="btn_master">Ma√Ætriser ‚Üí</a>
                </div>
            </div>
        </section>
'@

    # Ins√©rer la section avant <section class="tools">
    $contenu = $contenu -replace '(\s+<section class="tools">)', "$sectionMandala`n`$1"
    Write-Host "‚úÖ Section Mandala ajout√©e" -ForegroundColor Green
} else {
    Write-Host "‚ö†Ô∏è  La section Mandala est d√©j√† pr√©sente" -ForegroundColor Yellow
}

# MODIFICATION 3 : Ajouter le lien dans la navigation
if ($contenu -notmatch 'href="#mandala"') {
    Write-Host "‚è≥ Ajout du lien Mandala dans la navigation..." -ForegroundColor Yellow
    $contenu = $contenu -replace '(<a href="#logique" data-i18n="nav_logic">Logique</a>)', '$1`n            <a href="#mandala" data-i18n="nav_mandala">Mandala</a>'
    Write-Host "‚úÖ Lien navigation ajout√©" -ForegroundColor Green
} else {
    Write-Host "‚ö†Ô∏è  Le lien navigation est d√©j√† pr√©sent" -ForegroundColor Yellow
}

# MODIFICATION 4 : Ajouter les traductions FR
if ($contenu -notmatch 'mandala_title:') {
    Write-Host "‚è≥ Ajout des traductions fran√ßaises..." -ForegroundColor Yellow

    $traductionsFR = @'
                mandala_title: "üïâÔ∏è Mandalas Sacr√©s",
                mandala_intro: "Les mandalas sont des repr√©sentations g√©om√©triques de l''univers, utilis√©s depuis des mill√©naires dans les traditions bouddhistes et hindoues. La contemplation profonde d''un mandala, sans mots ni pens√©es, permet d''acc√©der au silence int√©rieur et √† la paix de l''esprit.",
                mandala_contemplation: "üßò Contemplation Profonde",
                badge_meditation: "M√©ditation",
                mandala_1: "Galerie plein √©cran immersive",
                mandala_2: "Sans mots, sans pens√©es",
                mandala_3: "Silence int√©rieur et concentration",
                mandala_4: "Navigation intuitive (fl√®ches ‚Äπ ‚Ä∫)",
                mandala_5: "Uploadez vos mandalas personnels",
                btn_contemplate: "Contempler ‚Üí",
                mandala_creation: "üé® Cr√©ation de Mandalas",
                mandala_create_1: "Comprendre la g√©om√©trie sacr√©e",
                mandala_create_2: "Symbolisme des formes et couleurs",
                mandala_create_3: "Mandalas tib√©tains traditionnels",
                mandala_create_4: "Techniques de dessin circulaire",
                mandala_create_5: "M√©ditation cr√©ative guid√©e",
                btn_create: "Cr√©er ‚Üí",
                mandala_mastery: "üå∫ Ma√Ætrise des Mandalas",
                mandala_master_1: "Mandalas tantriques avanc√©s",
                mandala_master_2: "Yantras et diagrammes cosmiques",
                mandala_master_3: "M√©ditation profonde prolong√©e",
                mandala_master_4: "Rituel de cr√©ation et destruction",
                mandala_master_5: "Transmission spirituelle par le mandala",
                nav_mandala: "Mandala",
'@

    # Ajouter apr√®s la ligne "footer: "
    $contenu = $contenu -replace '(footer: "¬© 2025 Acad√©mie des Runes & Gematria - Savoir ancestral, apprentissage moderne")', "$1,`n$traductionsFR"
    Write-Host "‚úÖ Traductions FR ajout√©es" -ForegroundColor Green
} else {
    Write-Host "‚ö†Ô∏è  Les traductions FR sont d√©j√† pr√©sentes" -ForegroundColor Yellow
}

# MODIFICATION 5 : Ajouter les traductions EN
if ($contenu -notmatch 'Sacred Mandalas') {
    Write-Host "‚è≥ Ajout des traductions anglaises..." -ForegroundColor Yellow

    $traductionsEN = @'
                mandala_title: "üïâÔ∏è Sacred Mandalas",
                mandala_intro: "Mandalas are geometric representations of the universe, used for millennia in Buddhist and Hindu traditions. Deep contemplation of a mandala, without words or thoughts, allows access to inner silence and peace of mind.",
                mandala_contemplation: "üßò Deep Contemplation",
                badge_meditation: "Meditation",
                mandala_1: "Immersive full-screen gallery",
                mandala_2: "Without words, without thoughts",
                mandala_3: "Inner silence and concentration",
                mandala_4: "Intuitive navigation (arrows ‚Äπ ‚Ä∫)",
                mandala_5: "Upload your personal mandalas",
                btn_contemplate: "Contemplate ‚Üí",
                mandala_creation: "üé® Mandala Creation",
                mandala_create_1: "Understanding sacred geometry",
                mandala_create_2: "Symbolism of shapes and colors",
                mandala_create_3: "Traditional Tibetan mandalas",
                mandala_create_4: "Circular drawing techniques",
                mandala_create_5: "Guided creative meditation",
                btn_create: "Create ‚Üí",
                mandala_mastery: "üå∫ Mandala Mastery",
                mandala_master_1: "Advanced tantric mandalas",
                mandala_master_2: "Yantras and cosmic diagrams",
                mandala_master_3: "Prolonged deep meditation",
                mandala_master_4: "Ritual of creation and destruction",
                mandala_master_5: "Spiritual transmission through mandala",
                nav_mandala: "Mandala",
'@

    # Ajouter apr√®s "footer: " de la section en
    $contenu = $contenu -replace '(en: \{[^}]*footer: "¬© 2025 Academy of Runes & Gematria - Ancient knowledge, modern learning")', "$1,`n$traductionsEN"
    Write-Host "‚úÖ Traductions EN ajout√©es" -ForegroundColor Green
} else {
    Write-Host "‚ö†Ô∏è  Les traductions EN sont d√©j√† pr√©sentes" -ForegroundColor Yellow
}

# Sauvegarder les modifications
Set-Content -Path $fichier -Value $contenu -Encoding UTF8 -NoNewline

Write-Host ""
Write-Host "========================================" -ForegroundColor Green
Write-Host "‚úÖ TOUTES LES MODIFICATIONS APPLIQU√âES !" -ForegroundColor Green
Write-Host "========================================" -ForegroundColor Green
Write-Host ""
Write-Host "Ouvrez maintenant index_multilingual.html dans votre navigateur" -ForegroundColor Cyan
Write-Host "Vous devriez voir :" -ForegroundColor Cyan
Write-Host "  - Les fonds d'√©cran anim√©s sur chaque section" -ForegroundColor White
Write-Host "  - La section Mandala entre Logique et Outils" -ForegroundColor White
Write-Host "  - Le lien Mandala dans la navigation" -ForegroundColor White
Write-Host ""

# Ouvrir la page
Start-Process "D:\Apprentissage_Runes_Gematria\index_multilingual.html"

Write-Host "Appuyez sur Entr√©e pour fermer..." -ForegroundColor Yellow
Read-Host
