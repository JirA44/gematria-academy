#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Ajoute le fond anim√© √† toutes les pages HTML
Style KOF Ultimate Online
"""

import os
import re

# Pages √† modifier
pages_a_modifier = [
    'index_COMPLET.html',
    'index_multilingual.html',
    'alphabet-hebreu.html',
    'alphabet-runes.html',
    'calculateur-gematria.html',
    'gematria-debutant.html',
    'gematria-intermediaire.html',
    'gematria-expert.html',
    'maya-debutant.html',
    'maya-intermediaire.html',
    'maya-expert.html',
    'mandala.html',
    'mandala_anime.html',
    'mandala-with-defaults.html',
    'immersion-inscriptions-index.html',
]

# Lignes √† ajouter
css_link = '    <link rel="stylesheet" href="animated-background.css">'
js_script = '    <script src="animated-background.js" defer></script>'

compteur = 0

for fichier in pages_a_modifier:
    chemin = fichier
    if not os.path.exists(chemin):
        print(f"‚ö†Ô∏è  {fichier} - Non trouv√©, skip")
        continue

    with open(chemin, 'r', encoding='utf-8') as f:
        contenu = f.read()

    # V√©rifier si d√©j√† ajout√©
    if 'animated-background.css' in contenu:
        print(f"‚úÖ {fichier} - D√©j√† pr√©sent, skip")
        continue

    # Trouver </head> et ajouter avant
    if '</head>' in contenu:
        # Ajouter CSS et JS juste avant </head>
        contenu = contenu.replace('</head>', f'{css_link}\n{js_script}\n</head>')

        with open(chemin, 'w', encoding='utf-8') as f:
            f.write(contenu)

        print(f"‚úÖ {fichier} - Fond anim√© ajout√©")
        compteur += 1
    else:
        print(f"‚ùå {fichier} - Pas de balise </head> trouv√©e")

print(f"\nüéâ {compteur} page(s) modifi√©e(s) !")
